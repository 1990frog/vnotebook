# 语法

## 元字符

### 原子的筛选方式  

+ \[ ] (中括号)范围字符
+ [abc]表示字母abc中的任意一个
+ [a-z]表示字母a到z中的任意一个
+ [^abc] ^ 为取非， 除了abc， 剩下的全部字符
+ [abc[def]]这种写法为并集，意为abcdef中的任意一个
+ [abc&[bce]]& 表示与， 也就是交集。 abc 与上 bce, 最终结果为bc
+ |匹配两个或者多个分支选择  
+ .匹配除换行符之外的任意字符  
+ \d匹配任意一个十进制数字，即[0-9]  
+ \D匹配任意一个非十进制数字，即[^0-9]  
+ \s匹配一个不可见原子，即[\f\n\r\t\v]  
+ \S匹配一个可见原子，即[^\f\n\r\t\v]  
+ \w匹配任意一个数字、字母或下划线，即[0-9a-zA-Z_]  
+ \W匹配任意一个非数字、字母或下划线，即[^0-9a-zA-Z_]  

## 量词

上面介绍的字符匹配符和范围控制符，一般是与数量控制符组合使用，才能发挥真正威力。 而数量控制符号，分为贪婪型，勉强型，和占有型三种类型，每种类型在不同的场合有不同的用法。  

### 贪婪型
+ ? 表示1个或0个。换句话说，表示要不然没有，要不然只有1个
+ * 表示0个或多个。
+ + 表示1个或多个。
+ {n}表示正好n个
+ {n,m} 表示n到m个，这是一个左闭右闭区间
+ {n,}表示至少n个

### 勉强型
相比于贪婪型，勉强型只是多了一个?：  

+ ?? 表示1个或0个。换句话说，表示要不然没有，要不然只有1个  
+ *? 表示0个或多个。  
+ +? 表示1个或多个。  
+ {n}?表示正好n个  
+ {n,m}? 表示n到m个，这是一个左闭右闭区间  
+ {n,}?表示至少n个  

### 占有型
相比于贪婪型，占有型多了一个 +  

+ ?+ 表示1个或0个。换句话说，表示要不然没有，要不然只有1个  
+ *+ 表示0个或多个。  
+ ++ 表示1个或多个。  
+ {n}+表示正好n个  
+ {n,m}+ 表示n到m个，这是一个左闭右闭区间  
+ {n,}+表示至少n个  

#### 总结：

+ 贪婪型。\w+， 意为匹配一个或多个单词字符，对于贪婪型，将尽量多的匹配字符，abcd全部匹配出来，直到遇到特殊字符&，匹配结束，然后用\w 去匹配特殊字符&，发现并不匹配，此时将会回溯，也就是说\w+只匹配abc三位，然后让最后一个\w去匹配d，最终\\w+\\w匹配出结果abcd.
+ 勉强型。对于勉强型，会尽量少的匹配字符。既然，+表示一个或多个，那就只匹配一个，所以\w+?最终只匹配出一个a， 然后\w再去匹配一个b，最终匹配结果为ab。
+ 占有型。 占有型和贪婪型很像，刚开始也会尽量多的匹配字符，但是占有型没有回溯机制，遇到不匹配的内容后，将自动停止而不是向前回溯。 所以 \\w++，自动匹配到abcd之后，遇到了&，发现不匹配，然后自动停止了，此时还有一个\w也和&不匹配，所以最终结果匹配失败，输出为空。

## 边界控制与模式单元  

+ ^匹配字符串开始的位置  
+ $匹配字符串结尾的位置  
+ ()匹配其中的整体为一个原子  
+ \b匹配单词边界。 这里的单词指的就是， a-z, 0-9, _， 和\w不同的是，\b匹配的单词还包括汉字。 单词边界匹配，是匹配单词字符和非单词字符之间的位置。
+ \B匹配非单词边界。和\b，刚好相反， \B 匹配单词与单词之间的位置，或者非单词与非单词之间的位置。
+ \G匹配前一个匹配结束时的位置。

## 等宽度断言匹配

还有一类特殊的匹配符，虽然严格意义上来说不能算是位置匹配符，但是由于这类匹配符也是零宽度的，所以本文章把这类匹配符归为位置匹配符。 这类特殊的匹配符，称为零宽度断言匹配。  

+ (?=exp)零宽度向前匹配
+ (?<=exp)零宽度向后匹配
+ (?!exp)零宽度向前非匹配
+ (?<!exp)零宽度向后非匹配


## 模式说明符

+ (?i) 开启大小写忽略模式，但是只适用于ASCII字符
+ (?u)开启utf-8编码模式
+ (?m)开启多行匹配模式，.不匹配空白字符
+ (?s)单行模式，.匹配任意字符，包括空白字符
+ (?d)单行模式，.不匹配空白字符







### 例子
+ [a-z][0-9]  
+ [a-b]  
+ [^a-zA-Z0-9]  
+ Duang|duangmai  
+ [D|d]uang  
+ (D|d)uang  
+ [a-zA-Z]{5}  

## 修正模式
贪婪匹配：匹配结果存在歧义时取其长  
懒惰匹配：匹配结果存在歧义时取其短  

U懒惰匹配，只匹配最近一个字符串，不重复匹配  
i忽略英文字母大小写  
g表示全局匹配  
m将字符串视为多行，不管是哪行都能匹配  
x忽略空白  
A强制从目标字符串开头匹配  
D如果使用$限制结尾字符，则不允许结尾有换行  
s让元字符'.'匹配包括换行符在内所有字符  
e配合函数preg_replace()使用，可以把匹配来的字符串当做正则表达式执行  

惰性量词：{m,n}? {m,}? ?? +? *?  
贪婪量词：{m,n} {m,} ? + *  

## 横向匹配纵向匹配
分支：|  
var regex = /good|goodbye/g  
var string = "goodbye"  
console.log(string.match(regex))  
//=>["good"]  
分支结构也是惰性的，即当前面的匹配上了，后面的就不再尝试了。  


实例
非空：.+  
浮点数匹配：\d+\.\d{2}$  
手机号：1[34578]\d{9}  
身份证：  
email地址：^\w+(\.\w+)*@\w+(\.\w+)+$  
URL匹配：^(https?://)?(\w+\.)+(com|cn|net)$  