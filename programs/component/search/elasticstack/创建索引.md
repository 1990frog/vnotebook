[TOC]

# 两种方式
+ 非结构化方式新建索引(no mapping)
+ 使用结构化方式创建索引

# 非结构化方式新建索引
不指定mapping，es会自动对数据类型进行推算，这种方式创建的索引可能会浪费空间如下，默认使用大类型的long
方式1：指定文档id
```json
PUT /index/_doc/1
{
  "code":10000,
  "value":"cd"
}

GET /index/_mapping

{
  "index" : {
    "mappings" : {
      "properties" : {
        "code" : {
          "type" : "long"
        },
        "value" : {
          "type" : "text",
          "fields" : {
            "keyword" : {
              "type" : "keyword",
              "ignore_above" : 256
            }
          }
        }
      }
    }
  }
}
```
方式2：自动生成文档id
```json
POST /index/_doc
{
  "code":10000,
  "value":"cd"
}
GET /index/_mapping
```

# 使用结构化方式创建索引
+ [settings](settings.md)
+ mappings
+ aliases
+ [基础类型](字段数据类型.md)

添加未定义的列不会出现异常，但是指定的数据类型与mapping设定的不相符就会报错
```json
put /city/
{
  "settings":{
    "number_of_shards":2,
    "number_of_replicas":3
  },
  "mappings":{
    "properties":{
      "code":{"type":"integer"},
      "value":{"type":"text"}
    }
  }
}
```











