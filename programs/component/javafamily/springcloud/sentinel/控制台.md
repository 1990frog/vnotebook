[TOC]

sentinel为每个服务都分配了一个端口？



# 实时监控
1. 展示曲线图
2. 展示监控列表（通过QPS，拒绝QPS，响应时间）

# 蔟点链路
罗列访问资源，可以对每个资源进行流控、降级、热点、授权操作
资源名：每个请求的唯一标识

在机器右侧下拉框中选择目标服务器 IP 地址，可快捷切换服务器。

在页面右侧单击平铺展示和树状展示，可快速变更展示方式
+ 平铺视图：不区分调用链路关系，平铺展示资源的运行情况。
+　树状视图：根据资源的调用链路关系，展示树状结构。















---

# 集群流控
为什么要使用集群流控呢？假设我们希望给某个用户限制调用某个 API 的总 QPS 为 50，但机器数可能很多（比如有 100 台）。这时候我们很自然地就想到，找一个 server 来专门来统计总的调用量，其它的实例都与这台 server 通信来判断是否可以调用。这就是最基础的集群流控的方式。

另外集群流控还可以解决流量不均匀导致总体限流效果不佳的问题。假设集群中有 10 台机器，我们给每台机器设置单机限流阈值为 10 QPS，理想情况下整个集群的限流阈值就为 100 QPS。不过实际情况下流量到每台机器可能会不均匀，会导致总量没有到的情况下某些机器就开始限流。因此仅靠单机维度去限制的话会无法精确地限制总体流量。而集群流控可以精确地控制整个集群的调用总量，结合单机限流兜底，可以更好地发挥流量控制的效果。

集群流控中共有两种身份：
+ Token Client：集群流控客户端，用于向所属 Token Server 通信请求 token。集群限流服务端会返回给客户端结果，决定是否限流。
+ Token Server：即集群流控服务端，处理来自 Token Client 的请求，根据配置的集群规则判断是否应该发放 token（是否允许通过）。
