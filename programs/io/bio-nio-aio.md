# dns解析
www.google.com dns解析 ip地址

域名的解析
www.google.com.root 从右向左解析
.root 根域名（都是root，省略）
.com/.edu/.org 顶级域名
.google/.baidu/.youtube 次级域名
www 主机名

![](_v_images/20191106210437409_2077942516.png)

![](_v_images/20191106210617525_136265005.png)

# 网络协议
![](_v_images/20191106211219981_585778214.png)

应用层：用户的应用（HTTP、FTP、SMTP）
传输层：端口到端口的链接（TCP、UDP）
网络层：主机到主机（IP）
链路层：网卡与网卡（Ethernet）【MAC地址】
实体层：光缆、wifi、网线（电信号）【物理连接】

一帧最大1518byte

![](_v_images/20191106212712423_1506174201.png)

![](_v_images/20191106213151457_331022047.png)

![](_v_images/20191106213226183_1676811856.png)

![](_v_images/20191106213427159_233190066.png)



网络编程的本质是进程间通信

![](_v_images/20191112214248475_24866848.png)

![](_v_images/20191112214549288_785106910.png)

stream 
input
output

reader
write

![](_v_images/20191112215310904_479580990.png)

![](_v_images/20191112220342509_2045257945.png)

![](_v_images/20191112220630293_1260055554.png)

DataOutputStream\DataOutputStream 输出基本数据类型

java.io 设计模式（装饰器模式）

![](_v_images/20191112221712894_224494831.png)

异步同步调用结果

![](_v_images/20191113230215178_1329092770.png)

![](_v_images/20191113230328979_2132466374.png)

# BIO
B(lock)IO

![](_v_images/20191124141608563_738489936.png)




+ <font color="red">Java BIO (blocking I/O)</font>： 同步并阻塞，服务器实现模式为一个连接一个线程，即客户端有连接请求时服务器端就需要启动一个线程进行处理，如果这个连接不做任何事情会造成不必要的线程开销，当然可以通过线程池机制改善。
+ Java NIO (non-blocking I/O)： 同步非阻塞，服务器实现模式为一个请求一个线程，即客户端发送的连接请求都会注册到多路复用器上，多路复用器轮询到连接有I/O请求时才启动一个线程进行处理。
+ Java AIO(NIO.2) (Asynchronous I/O) ： 异步非阻塞，服务器实现模式为一个有效请求一个线程，客户端的I/O请求都是由OS先完成了再通知服务器应用去启动线程进行处理，

BIO、NIO、AIO适用场景分析:

+ BIO方式适用于连接数目比较小且固定的架构，这种方式对服务器资源要求比较高，并发局限于应用中，JDK1.4以前的唯一选择，但程序直观简单易理解。
+ NIO方式适用于连接数目多且连接比较短（轻操作）的架构，比如聊天服务器，并发局限于应用中，编程比较复杂，JDK1.4开始支持。
+ AIO方式使用于连接数目多且连接比较长（重操作）的架构，比如相册服务器，充分调用OS参与并发操作，编程比较复杂，JDK7开始支持。

# BIO中的阻塞
ServerSocket.accept()
InputStream.read()
OutputStream.write()
无法在同一个线程里处理多个Stream I/O

# 非阻塞式NIO
1.使用Channel代替Stream

流是单向的：写入、写出
通道是双向的
Channel可阻塞、也可非阻塞

2.使用Selector监控多条Channel
3.可以在一个线程里处理多个Channel I/O

# Channel与Buffer
![](_v_images/20200102213144377_250675781.png)
![](_v_images/20200102213454275_1657550550.png)
![](_v_images/20200102213525298_1673552578.png)
![](_v_images/20200102213751905_291506710.png)
未全部读完
![](_v_images/20200102214301397_1972551260.png)

# Channel基本操作
![](_v_images/20200102214415397_393942958.png)
![](_v_images/20200102214455428_1220963344.png)
